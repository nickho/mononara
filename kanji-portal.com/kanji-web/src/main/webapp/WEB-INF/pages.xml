<?xml version="1.0" encoding="UTF-8"?>
<pages xmlns="http://jboss.com/products/seam/pages"
       xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
       xsi:schemaLocation="http://jboss.com/products/seam/pages http://jboss.com/products/seam/pages-2.1.xsd"
       no-conversation-view-id="/home.xhtml"
       login-view-id="/login.xhtml">

    <!-- Home -->
    <page view-id="/home.xhtml">
        <!--rewrite pattern="/home"/-->
    </page>

    <!-- Kanjis -->
    <page view-id="/kanjis/search.xhtml">
        <description>Search Kanjis</description>
    </page>

    <page view-id="/kanjis/view.xhtml">
        <description>View Kanji: #{kanji.kanji}</description>
        <!--rewrite pattern="/kanji/{kanjiId}"/-->
        <action execute="#{kanjiView.view()}"/>
    </page>

    <page view-id="/kanjis/edit.xhtml" login-required="true"> <!--login-required="true"-->
        <description>Edit Kanji</description>
        <action execute="#{kanjiEdit.edit()}"/>
    </page>
    <!-- end of Kanjis -->

    <!-- Dictionnary -->
    <page view-id="/dictionnary/search.xhtml">
        <description>Search Dictionnary</description>
    </page>

    <page view-id="/dictionnary/view.xhtml">
        <description>View Dictionnary</description>
        <!--rewrite pattern="/kanji/{kanjiId}"/-->
    </page>

    <!--
    <page view-id="/dictionnary/edit.xhtml" login-required="true">
        <description>Edit Dictionnary</description>
    </page>
    -->
    <!-- end of Dictionnary -->


    <!-- Login pages -->
    <page view-id="/login.xhtml">
        <navigation>
            <rule if="#{identity.loggedIn}">
                <redirect view-id="/home.xhtml"/>
            </rule>
        </navigation>
    </page>
    <!-- end of login pages -->

    <!-- Admin pages -->
    <page view-id="/admin/lucene.xhtml">
        <description>Lucene admin page</description>
    </page>
    <!-- end of login pages -->

    <exception class="org.jboss.seam.security.NotLoggedInException">
        <redirect view-id="/login.xhtml">
            <message severity="warn">You must be logged in to use this feature</message>
        </redirect>
    </exception>

    <exception class="com.kanjiportal.portal.service.BadDateFormatingException">
        <http-error error-code="400">
            <message>Arguments not valid: #{org.jboss.seam.handledException.message}</message>
        </http-error>
    </exception>

</pages>
